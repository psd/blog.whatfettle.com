---
title: Best Practice for Web Services
timestamp: 2007-11-18T23:42:23Z
date: 2007-11-18
---

<p>It seems not a week goes by without some poor lost soul looking to me to help publish a Web service in a way which stands some chance of interoperating. I helped carefully craft guidelines published on an internal Wiki, but it says much about how we now work that policy published on an internal <i>anything</i> isn't always authoritative, useful or readily available. This is especially true when dealing with people working for third party suppliers, consultancy groups, outsouring outfits and wot not, ironically the very users most Web services are targeted at. So in the interest of transparency, and to assist <a href="http://blog.whatfettle.com/2007/10/19/end-of-an-era/">my moving on</a>, here are some simple best practices you might like to follow when publishing a Web service:</p>
<dl>
<dt>WS-I Basic Profile Conformance</dt>
<dd>Although you may use other specifications yourself, don't expect your customer to understand anything beyond <a href="http://www.w3.org/TR/2000/NOTE-SOAP-20000508/">SOAP 1.1</a> and WS-Addressing, I'd suggest using <a href="http://www.w3.org/Submission/ws-addressing/">2004/08</a> namespace, but most tools now understand the <a href="http://www.w3.org/TR/ws-addr-core/">W3C WS-Addressing</a> recommendation. Following the WS-I Basic Profile <a href="http://www.ws-i.org/Profiles/BasicProfile-1_2(WGAD).html">1.2</a> is pretty much all you need, and is easily checked using the <a href="http://www.ws-i.org/deliverables/workinggroup.aspx?wg=testingtools">testing tools</a>.</dd>
<dt>WSDL First</dt>
<dd>You don't have to publish a <a href="http://www.w3.org/TR/wsdl">WSDL</a> document, but most people using Web services will expect one. Don't entrust this task to generalised tooling such as XMLSpy, and avoid like the plague tools which generate WSDL from Java or C# which spew out WSDL almost as an afterthought which doesn't interoperate, exposes the wrong information, and can be very brittle when recompiling or regenerating your code. Instead consider using a simplified model and some simple templating technology, such as XSLT, to generate your WSDL under your control, consistently. As an example of simple WSDL you can follow, see <a href="http://sdk.bt.com/2007/07/Session/ThirdPartyCall.wsdl">ThirdPartyCall.wsdl</a>.</dd> 
<dt>W3C XML Schema Patterns for Databinding Conformance</dt>
<dd>Although not obligatory, most consumers of your Web service will expect to be abstracted away from the contents of the messages being exchanged using databinding tools. WSDL which only contains XML Schema constructs offered by the <a href="http://www.w3.org/TR/xmlschema-patterns/">W3C XML Basic Schema Patterns for Databinding</a> specification is far likelier to interoperate with toolkits. Note very few standard schemas interoperate with databinding tools, so forget generating Java etc from the likes of SPML, HL7, OAGIS, etc wrapped up in WSDL.</dd>
<dt>XML Schema Killed Message Evolution</dt>
<dd>At some point you'll likely as not want to make minor changes to your interface without breaking existing interactions. This is neigh impossible if you use XML Schema to describe your message contents, and care about interoperability with tools. In WSDL, you can add another operation, and in XML Schema, you can add additional elements and types, but the cleanest way is to communicate a breaking change by publishing another WSDL document with a different namespace. Yeah, I know, it sucks, but heck, <a href="http://www.w3.org/2005/06/21-schema-workshop/chairs-report.html#Versioning">we tried</a>!</dd>
<dt>Expect to Document WS-Security</dt>
<dd>If you do use WS-Security, then follow the <a href="http://www.ws-i.org/Profiles/BasicSecurityProfile-1.1.html">WS-I Basic Security Profile</a> and expect to have to write documentation to describe the message contents, as we have for the <a href="http://web21c.bt.com/howtos/diy_web_service_calls">Web21C SDK</a>. This is the point where most customers will thank you for providing an SDK, rather than exposing description in one of the many flavors of WS-Policy containing one of the myriad of versions of assertion languages, few, if any of which, will interoperate with tools.</dd>
</dl>
<p>Of course things continue to slowly improve, and this advice will date, eventually. However, and this is really important, if you care about not wasting lots of your customers' time and money, unless you are developing a service for a single consumer who demands them, I would strongly advise you DO NOT use WS-* at all. Stick to exposing data as simple Web pages, secured using the <a href="http://oauth.net/">OAuth</a> pattern, or similar method employed by the likes of <a href="http://code.google.com/apis/base/starting-out.html#accessing">Google Base</a>, <a href="http://mojo.bt.com/howtos">BT Mojo</a>, <a href="http://docs.amazonwebservices.com/AmazonS3/2006-03-01/RESTAuthentication.html">Amazon S3</a>, <a href="http://developer.yahoo.com/auth/">Yahoo! BBAuth</a>, <a href="http://www.flickr.com/services/api/misc.userauth.html">Flickr</a>, <a href="http://developers.facebook.com/documentation.php?doc=auth">Facebook</a>, etc, etc. IOW <a href="http://www.25hoursaday.com/weblog/2007/11/15/WSIsToRESTAsTheoryIsToPractice.aspx">what Dare said</a>.</p>
<p style="text-align:right;font-size:10px;">Technorati Tags: <a href="http://www.technorati.com/tag/webservices" rel="tag">Web services</a>
</p>